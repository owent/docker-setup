# GitHub 资产缓存配置
# 注意: 不缓存 raw.githubusercontent.com 以避免拉不到最新版本

acl github_assets dstdomain release-assets.githubusercontent.com
acl github_assets dstdomain objects.githubusercontent.com
acl github_assets dstdomain codeload.github.com
acl github_assets dstdomain gist.githubusercontent.com
acl github_assets dstdomain user-attachments.githubusercontent.com

# tls: 启用 TLS 连接到后端
# tls-default-ca=on: 使用系统 CA 证书验证服务器
cache_peer release-assets.githubusercontent.com parent 443 0 no-query originserver tls tls-default-ca=on name=github_release_assets
cache_peer_access github_release_assets allow github_assets
never_direct allow github_assets

store_id_access allow github_assets
cache allow github_assets

# 缓存策略: 7天 min, 30天 max
refresh_pattern -i release-assets\.githubusercontent\.com 10080 100% 43200 override-expire ignore-reload ignore-no-store ignore-private
refresh_pattern -i objects\.githubusercontent\.com 10080 100% 43200 override-expire ignore-reload ignore-no-store ignore-private
refresh_pattern -i codeload\.github\.com 10080 100% 43200 override-expire ignore-reload ignore-no-store ignore-private
refresh_pattern -i gist\.githubusercontent\.com 10080 100% 43200 override-expire ignore-reload ignore-no-store ignore-private
refresh_pattern -i user-attachments\.githubusercontent\.com 10080 100% 43200 override-expire ignore-reload ignore-no-store ignore-private
